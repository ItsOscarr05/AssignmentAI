[pytest]
pythonpath = .
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short
    --cov=app
    --cov-report=term-missing
    --cov-report=html
    --cov-fail-under=80
    --no-cov-on-fail
    --strict-markers
asyncio_mode = auto
env =
    TESTING=True
    DATABASE_URL=sqlite:///./test.db
    SECRET_KEY=test-secret-key
    OPENAI_API_KEY=test-api-key
    SMTP_USERNAME=test@example.com
    SMTP_PASSWORD=test-password
    SMTP_FROM_EMAIL=test@example.com
    STRIPE_PRICE_FREE=price_free_test
    STRIPE_PRICE_PLUS=price_plus_test
    STRIPE_PRICE_PRO=price_pro_test
    STRIPE_PRICE_MAX=price_max_test
filterwarnings =
    ignore:The stripe\.api_resources\.error_object package is deprecated:DeprecationWarning
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    auth: marks tests as authentication tests
    api: marks tests as API endpoint tests 